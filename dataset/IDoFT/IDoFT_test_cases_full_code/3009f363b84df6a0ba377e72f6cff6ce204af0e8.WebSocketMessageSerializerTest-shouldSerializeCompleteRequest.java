@Test public void shouldSerializeCompleteRequest() throws IOException {
  String jsonHttpRequest=new WebSocketMessageSerializer(new MockServerLogger()).serialize(new HttpRequestDTO().setMethod(string("someMethod")).setPath(string("somePath")).setQueryStringParameters(new Parameters().withEntries(param("queryParameterName","queryParameterValue"))).setBody(BodyDTO.createDTO(exact("somebody"))).setHeaders(new Headers().withEntries(header("someHeaderName","someHeaderValue"))).setCookies(new Cookies().withEntries(cookie("someCookieName","someCookieValue"))).setSecure(true).setKeepAlive(false).setSocketAddress(new SocketAddressDTO(new SocketAddress().withHost("someHost").withPort(1234).withScheme(SocketAddress.Scheme.HTTPS))).buildObject());
  assertEquals("{" + NEW_LINE + "  \"type\" : \"org.mockserver.model.HttpRequest\","+ NEW_LINE+ "  \"value\" : \"{"+ StringEscapeUtils.escapeJava(NEW_LINE)+ "  \\\"method\\\" : \\\"someMethod\\\","+ StringEscapeUtils.escapeJava(NEW_LINE)+ "  \\\"path\\\" : \\\"somePath\\\","+ StringEscapeUtils.escapeJava(NEW_LINE)+ "  \\\"queryStringParameters\\\" : {"+ StringEscapeUtils.escapeJava(NEW_LINE)+ "    \\\"queryParameterName\\\" : [ \\\"queryParameterValue\\\" ]"+ StringEscapeUtils.escapeJava(NEW_LINE)+ "  },"+ StringEscapeUtils.escapeJava(NEW_LINE)+ "  \\\"headers\\\" : {"+ StringEscapeUtils.escapeJava(NEW_LINE)+ "    \\\"someHeaderName\\\" : [ \\\"someHeaderValue\\\" ]"+ StringEscapeUtils.escapeJava(NEW_LINE)+ "  },"+ StringEscapeUtils.escapeJava(NEW_LINE)+ "  \\\"cookies\\\" : {"+ StringEscapeUtils.escapeJava(NEW_LINE)+ "    \\\"someCookieName\\\" : \\\"someCookieValue\\\""+ StringEscapeUtils.escapeJava(NEW_LINE)+ "  },"+ StringEscapeUtils.escapeJava(NEW_LINE)+ "  \\\"keepAlive\\\" : false,"+ StringEscapeUtils.escapeJava(NEW_LINE)+ "  \\\"secure\\\" : true,"+ StringEscapeUtils.escapeJava(NEW_LINE)+ "  \\\"socketAddress\\\" : {"+ StringEscapeUtils.escapeJava(NEW_LINE)+ "    \\\"host\\\" : \\\"someHost\\\","+ StringEscapeUtils.escapeJava(NEW_LINE)+ "    \\\"port\\\" : 1234,"+ StringEscapeUtils.escapeJava(NEW_LINE)+ "    \\\"scheme\\\" : \\\"HTTPS\\\""+ StringEscapeUtils.escapeJava(NEW_LINE)+ "  },"+ StringEscapeUtils.escapeJava(NEW_LINE)+ "  \\\"body\\\" : \\\"somebody\\\""+ StringEscapeUtils.escapeJava(NEW_LINE)+ "}\""+ NEW_LINE+ "}",jsonHttpRequest);
}

@Test public void shouldReturnFormattedResponseWithAllFieldsSet() throws JsonProcessingException {
  assertThat(ObjectMapperFactory.createObjectMapper(true).writeValueAsString(response().withStatusCode(302).withReasonPhrase("randomReason").withBody("some_body").withHeaders(new Header("header_name","header_value")).withCookies(new Cookie("cookie_name","cookie_value")).withDelay(new Delay(TimeUnit.MICROSECONDS,1)).withConnectionOptions(new ConnectionOptions().withSuppressContentLengthHeader(true).withContentLengthHeaderOverride(50).withSuppressConnectionHeader(true).withChunkSize(100).withKeepAliveOverride(true).withCloseSocket(true).withCloseSocketDelay(new Delay(MILLISECONDS,100)))),is("{" + NEW_LINE + "  \"statusCode\" : 302,"+ NEW_LINE+ "  \"reasonPhrase\" : \"randomReason\","+ NEW_LINE+ "  \"headers\" : {"+ NEW_LINE+ "    \"header_name\" : [ \"header_value\" ]"+ NEW_LINE+ "  },"+ NEW_LINE+ "  \"cookies\" : {"+ NEW_LINE+ "    \"cookie_name\" : \"cookie_value\""+ NEW_LINE+ "  },"+ NEW_LINE+ "  \"body\" : \"some_body\","+ NEW_LINE+ "  \"delay\" : {"+ NEW_LINE+ "    \"timeUnit\" : \"MICROSECONDS\","+ NEW_LINE+ "    \"value\" : 1"+ NEW_LINE+ "  },"+ NEW_LINE+ "  \"connectionOptions\" : {"+ NEW_LINE+ "    \"suppressContentLengthHeader\" : true,"+ NEW_LINE+ "    \"contentLengthHeaderOverride\" : 50,"+ NEW_LINE+ "    \"suppressConnectionHeader\" : true,"+ NEW_LINE+ "    \"chunkSize\" : 100,"+ NEW_LINE+ "    \"keepAliveOverride\" : true,"+ NEW_LINE+ "    \"closeSocket\" : true,"+ NEW_LINE+ "    \"closeSocketDelay\" : {"+ NEW_LINE+ "      \"timeUnit\" : \"MILLISECONDS\","+ NEW_LINE+ "      \"value\" : 100"+ NEW_LINE+ "    }"+ NEW_LINE+ "  }"+ NEW_LINE+ "}"));
}

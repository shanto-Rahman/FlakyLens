@Test public void testRemove2(){
  MetadataKey key1=new FieldMetadataKey("s",1,"sfn","f1");
  MetadataKey key4=new FieldMetadataKey("s",4,"sfn","f2");
  MetadataKey key5=new FieldMetadataKey("s",5,"sfn","f1");
  MetadataValue value1=MetadataValue.builder().doc("doc1").attributes(null).updatedAt(new Date()).updatedBy("me").build();
  MetadataValue value4=MetadataValue.builder().doc("doc4").attributes(null).updatedAt(new Date()).updatedBy("me").build();
  MetadataValue value5=MetadataValue.builder().doc("doc5").attributes(null).updatedAt(new Date()).updatedBy("me").build();
  InheritingMetadataContainer container=new InheritingMetadataContainer("s");
  container.put(key1,value1);
  container.put(key4,value4);
  container.put(key5,value5);
  Map<MetadataKey,MetadataValue> byVersion5=container.getCollection(5);
  Assert.assertTrue(byVersion5.size() == 2);
  Assert.assertEquals(byVersion5.get(key4),value4);
  Assert.assertEquals(byVersion5.get(key5),value5);
  Map<MetadataKey,MetadataValue> byVersion1=container.getCollection(1);
  Assert.assertTrue(byVersion1.size() == 1);
  Assert.assertEquals(byVersion1.get(key1),value1);
  Map<MetadataKey,MetadataValue> byVersion4=container.getCollection(4);
  Assert.assertTrue(byVersion4.size() == 2);
  Assert.assertEquals(byVersion4.get(key1),value1);
  Assert.assertEquals(byVersion4.get(key4),value4);
  MetadataValue old1=container.remove(key1);
  Assert.assertEquals(old1,value1);
  byVersion5=container.getCollection(5);
  Assert.assertTrue(byVersion5.size() == 2);
  Assert.assertEquals(byVersion5.get(key4),value4);
  Assert.assertEquals(byVersion5.get(key5),value5);
  byVersion1=container.getCollection(1);
  Assert.assertNull(byVersion1);
  byVersion4=container.getCollection(4);
  Assert.assertTrue(byVersion4.size() == 1);
  Assert.assertEquals(byVersion4.get(key4),value4);
}

@Test public void testSnapshotRestoreSync() throws Exception {
assertEquals(3,operatorStateBackend.getRegisteredStateNames().size());
assertEquals(3,operatorStateBackend.getRegisteredBroadcastStateNames().size());
assertEquals(3,operatorStateBackend.getRegisteredStateNames().size());
assertEquals(3,operatorStateBackend.getRegisteredBroadcastStateNames().size());
assertEquals(42,it.next());
assertEquals(4711,it.next());
assertFalse(it.hasNext());
assertEquals(7,it.next());
assertEquals(13,it.next());
assertEquals(23,it.next());
assertFalse(it.hasNext());
assertEquals(17,it.next());
assertEquals(18,it.next());
assertEquals(19,it.next());
assertEquals(20,it.next());
assertFalse(it.hasNext());
assertTrue(bIt.hasNext());
assertEquals(1,entry.getKey());
assertEquals(2,entry.getValue());
assertTrue(bIt.hasNext());
assertEquals(2,entry.getKey());
assertEquals(5,entry.getValue());
assertFalse(bIt.hasNext());
assertTrue(bIt.hasNext());
assertEquals(2,entry.getKey());
assertEquals(5,entry.getValue());
assertFalse(bIt.hasNext());
assertFalse(bIt.hasNext());
}
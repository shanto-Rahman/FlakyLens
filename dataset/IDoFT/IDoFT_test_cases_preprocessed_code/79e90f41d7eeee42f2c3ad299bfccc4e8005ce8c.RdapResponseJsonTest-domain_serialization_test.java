@Test public void domain_serialization_test() throws Exception {
assertThat(marshal(domain),equalTo("" + "{\n" + "  \"handle\" : \"XXXX\",\n"+ "  \"ldhName\" : \"192.in-addr.arpa\",\n"+ "  \"nameServers\" : [ {\n"+ "    \"ldhName\" : \"ns1.rir.example\",\n"+ "    \"objectClassName\" : \"nameserver\"\n"+ "  }, {\n"+ "    \"ldhName\" : \"ns2.rir.example\",\n"+ "    \"objectClassName\" : \"nameserver\"\n"+ "  } ],\n"+ "  \"secureDNS\" : {\n"+ "    \"delegationSigned\" : true,\n"+ "    \"dsData\" : [ {\n"+ "      \"keyTag\" : 12345,\n"+ "      \"algorithm\" : 3,\n"+ "      \"digest\" : \"49FD46E6C4B45C55D4AC\",\n"+ "      \"digestType\" : 1\n"+ "    } ]\n"+ "  },\n"+ "  \"entities\" : [ {\n"+ "    \"handle\" : \"XXXX\",\n"+ "    \"vcardArray\" : [ \"vcard\", [ [ \"version\", {"+ " }, \"text\", \"4.0\" ], [ \"fn\", {"+ " }, \"text\", \"Joe User\" ], [ \"kind\", {"+ " }, \"text\", \"individual\" ], [ \"org\", {"+ " }, \"text\", \"Example\" ], [ \"title\", {"+ " }, \"text\", \"Research Scientist\" ], [ \"role\", {"+ " }, \"text\", \"Project Lead\" ], [ \"adr\", {"+ " }, \"text\", [ \"\", \"Suite 1234\", \"4321 Rue Somewhere\", \"Quebec\", \"QC\", \"G1V 2M2\", \"Canada\" ] ], [ \"tel\", {"+ " }, \"uri\", \"tel:+1-555-555-1234;ext=102\" ], [ \"email\", {"+ " }, \"text\", \"joe.user@example.com\" ] ] ],\n"+ "    \"roles\" : [ \"registrant\" ],\n"+ "    \"remarks\" : [ {\n"+ "      \"description\" : [ \"She sells sea shells down by the sea shore.\", \"Originally written by Terry Sullivan.\" ]\n"+ "    } ],\n"+ "    \"links\" : [ {\n"+ "      \"value\" : \"http://example.net/entity/xxxx\",\n"+ "      \"rel\" : \"self\",\n"+ "      \"href\" : \"http://example.net/entity/xxxx\"\n"+ "    } ],\n"+ "    \"events\" : [ {\n"+ "      \"eventAction\" : \"registration\",\n"+ "      \"eventDate\" : \"2013-06-26T04:48:44Z\"\n"+ "    }, {\n"+ "      \"eventAction\" : \"last changed\",\n"+ "      \"eventDate\" : \"2013-06-26T04:48:44Z\",\n"+ "      \"eventActor\" : \"joe@example.com\"\n"+ "    } ],\n"+ "    \"objectClassName\" : \"entity\"\n"+ "  } ],\n"+ "  \"remarks\" : [ {\n"+ "    \"description\" : [ \"She sells sea shells down by the sea shore.\", \"Originally written by Terry Sullivan.\" ]\n"+ "  } ],\n"+ "  \"links\" : [ {\n"+ "    \"value\" : \"http://example.net/domain/XXXX\",\n"+ "    \"rel\" : \"self\",\n"+ "    \"href\" : \"http://example.net/domain/XXXXX\"\n"+ "  } ],\n"+ "  \"events\" : [ {\n"+ "    \"eventAction\" : \"registration\",\n"+ "    \"eventDate\" : \"2013-06-26T04:48:44Z\"\n"+ "  }, {\n"+ "    \"eventAction\" : \"last changed\",\n"+ "    \"eventDate\" : \"2013-06-26T04:48:44Z\",\n"+ "    \"eventActor\" : \"joe@example.com\"\n"+ "  } ],\n"+ "  \"objectClassName\" : \"domain\"\n"+ "}"));
}
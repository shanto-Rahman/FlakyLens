/** 
 * Test simple invocation on a cluster where client mappings use literal IP addresses instead of hostnames, generating mixed mode entries in the DNR. A Byteman script will verify whether or not the expected set of ServiceURLs has been correctly generated.
 */
@BMRules(rules={@BMRule(name="Set up results linkMap (SETUP)",targetClass="org.jboss.ejb.protocol.remote.RemotingEJBDiscoveryProvider",targetMethod="<init>",helper="org.jboss.ejb.client.test.byteman.MixedModeTestHelper",targetLocation="EXIT",condition="debug(\"setting up the map\")",action="createNodeListMap();"),@BMRule(name="Track calls to getServiceURLCache (COLLECT)",targetClass="org.jboss.ejb.protocol.remote.NodeInformation",targetMethod="getServiceURLCache",helper="org.jboss.ejb.client.test.byteman.MixedModeTestHelper",targetLocation="EXIT",binding="node = $0; nodeName = node.getNodeName(); result = $!",condition="debug(\"NodeInformation.getServiceURLCache() was called\")",action="addServiceURLCacheToMap(nodeName,result)"),@BMRule(name="Track calls to discover (COLLECT)",targetClass="org.jboss.ejb.protocol.remote.NodeInformation",targetMethod="discover",targetLocation="ENTRY",condition="true",action="debug(\"NodeInformation.discover() was called\")"),@BMRule(name="Return test result to test case (RETURN)",targetClass="org.jboss.ejb.client.test.byteman.MixedModeServiceURLTestCase",targetMethod="getTestResult",helper="org.jboss.ejb.client.test.byteman.MixedModeTestHelper",targetLocation="ENTRY",condition="debug(\"returning the result\")",action="return getNodeListMap();")}) @Test public void testInvocationOnMixedModeCluster(){
Assert.assertNotNull("Received a null proxy",proxy);
}
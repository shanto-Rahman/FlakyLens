@Test public void testAppNamespace() throws Exception {
assertNull(appNamespaceServiceWithCache.findByAppIdAndNamespace(someAppId,somePrivateNamespace));
assertNull(appNamespaceServiceWithCache.findByAppIdAndNamespace(someAppId,somePrivateNamespaceWithIncorrectCase));
assertNull(appNamespaceServiceWithCache.findByAppIdAndNamespace(someAppId,yetAnotherPrivateNamespace));
assertNull(appNamespaceServiceWithCache.findByAppIdAndNamespace(someAppId,anotherPublicNamespace));
assertTrue(appNamespaceServiceWithCache.findByAppIdAndNamespaces(someAppId,someAppIdNamespaces).isEmpty());
assertTrue(appNamespaceServiceWithCache.findByAppIdAndNamespaces(someAppId,someAppIdNamespacesWithIncorrectCase).isEmpty());
assertNull(appNamespaceServiceWithCache.findByAppIdAndNamespace(somePublicAppId,somePublicNamespace));
assertNull(appNamespaceServiceWithCache.findByAppIdAndNamespace(somePublicAppId,somePublicNamespaceWithIncorrectCase));
assertNull(appNamespaceServiceWithCache.findByAppIdAndNamespace(somePublicAppId,anotherPrivateNamespace));
assertTrue(appNamespaceServiceWithCache.findByAppIdAndNamespaces(somePublicAppId,somePublicAppIdNamespaces).isEmpty());
assertNull(appNamespaceServiceWithCache.findPublicNamespaceByName(somePublicNamespace));
assertNull(appNamespaceServiceWithCache.findPublicNamespaceByName(somePublicNamespaceWithIncorrectCase));
assertNull(appNamespaceServiceWithCache.findPublicNamespaceByName(anotherPublicNamespace));
assertTrue(appNamespaceServiceWithCache.findPublicNamespacesByNames(publicNamespaces).isEmpty());
assertTrue(appNamespaceServiceWithCache.findPublicNamespacesByNames(publicNamespacesWithIncorrectCase).isEmpty());
scanIntervalTimeUnit.sleep(sleepInterval);
assertEquals(somePrivateAppNamespace,appNamespaceServiceWithCache.findByAppIdAndNamespace(someAppId,somePrivateNamespace));
assertEquals(somePrivateAppNamespace,appNamespaceServiceWithCache.findByAppIdAndNamespace(someAppId,somePrivateNamespaceWithIncorrectCase));
assertEquals(somePublicAppNamespace,appNamespaceServiceWithCache.findByAppIdAndNamespace(somePublicAppId,somePublicNamespace));
assertEquals(somePublicAppNamespace,appNamespaceServiceWithCache.findByAppIdAndNamespace(somePublicAppId,somePublicNamespaceWithIncorrectCase));
assertEquals(somePublicAppNamespace,appNamespaceServiceWithCache.findPublicNamespaceByName(somePublicNamespace));
assertEquals(somePublicAppNamespace,appNamespaceServiceWithCache.findPublicNamespaceByName(somePublicNamespaceWithIncorrectCase));
scanIntervalTimeUnit.sleep(sleepInterval);
scanIntervalTimeUnit.sleep(sleepInterval);
assertNull(appNamespaceServiceWithCache.findByAppIdAndNamespace(someAppId,somePrivateNamespace));
assertNull(appNamespaceServiceWithCache.findByAppIdAndNamespace(someAppId,yetAnotherPrivateNamespace));
assertNull(appNamespaceServiceWithCache.findByAppIdAndNamespace(someAppId,anotherPublicNamespace));
assertEquals(somePublicAppNamespaceNew,appNamespaceServiceWithCache.findByAppIdAndNamespace(somePublicAppId,somePublicNamespace));
assertNull(appNamespaceServiceWithCache.findPublicNamespaceByName(somePublicNamespace));
assertNull(appNamespaceServiceWithCache.findPublicNamespaceByName(anotherPublicNamespace));
assertEquals(somePrivateAppNamespaceNew,appNamespaceServiceWithCache.findByAppIdAndNamespace(someAppId,somePrivateNamespaceNew));
assertEquals(yetAnotherPrivateAppNamespaceNew,appNamespaceServiceWithCache.findByAppIdAndNamespace(someAppIdNew,yetAnotherPrivateNamespace));
}
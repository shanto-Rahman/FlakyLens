/** 
 * See https://activiti.atlassian.net/browse/ACT-2089
 */
public void testDueDateSortingWithNulls(){
assertEquals(6,taskService.createTaskQuery().count());
assertNotNull(tasks.get(i).getDueDate());
assertEquals("task3",tasks.get(0).getName());
assertEquals("task1",tasks.get(1).getName());
assertEquals("task2",tasks.get(2).getName());
assertEquals("task0",tasks.get(3).getName());
assertNull(tasks.get(4).getDueDate());
assertNull(tasks.get(5).getDueDate());
assertNotNull(tasks.get(i).getDueDate());
assertEquals("task0",tasks.get(0).getName());
assertEquals("task2",tasks.get(1).getName());
assertEquals("task1",tasks.get(2).getName());
assertEquals("task3",tasks.get(3).getName());
assertNull(tasks.get(4).getDueDate());
assertNull(tasks.get(5).getDueDate());
assertNull(tasks.get(0).getDueDate());
assertNull(tasks.get(1).getDueDate());
assertEquals("task3",tasks.get(2).getName());
assertEquals("task1",tasks.get(3).getName());
assertEquals("task2",tasks.get(4).getName());
assertEquals("task0",tasks.get(5).getName());
assertNull(tasks.get(0).getDueDate());
assertNull(tasks.get(1).getDueDate());
assertEquals("task0",tasks.get(2).getName());
assertEquals("task2",tasks.get(3).getName());
assertEquals("task1",tasks.get(4).getName());
assertEquals("task3",tasks.get(5).getName());
if (processEngineConfiguration.getHistoryLevel().isAtLeast(HistoryLevel.AUDIT)) {
assertNotNull(historicTasks.get(i).getDueDate());
assertEquals("task3",historicTasks.get(0).getName());
assertEquals("task1",historicTasks.get(1).getName());
assertEquals("task2",historicTasks.get(2).getName());
assertEquals("task0",historicTasks.get(3).getName());
assertNull(historicTasks.get(4).getDueDate());
assertNull(historicTasks.get(5).getDueDate());
assertNotNull(historicTasks.get(i).getDueDate());
assertEquals("task0",historicTasks.get(0).getName());
assertEquals("task2",historicTasks.get(1).getName());
assertEquals("task1",historicTasks.get(2).getName());
assertEquals("task3",historicTasks.get(3).getName());
assertNull(historicTasks.get(4).getDueDate());
assertNull(historicTasks.get(5).getDueDate());
assertNull(historicTasks.get(0).getDueDate());
assertNull(historicTasks.get(1).getDueDate());
assertEquals("task3",historicTasks.get(2).getName());
assertEquals("task1",historicTasks.get(3).getName());
assertEquals("task2",historicTasks.get(4).getName());
assertEquals("task0",historicTasks.get(5).getName());
assertNull(historicTasks.get(0).getDueDate());
assertNull(historicTasks.get(1).getDueDate());
assertEquals("task0",historicTasks.get(2).getName());
assertEquals("task2",historicTasks.get(3).getName());
assertEquals("task1",historicTasks.get(4).getName());
assertEquals("task3",historicTasks.get(5).getName());
}
}
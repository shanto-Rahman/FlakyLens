@Deployment(resources={"org/activiti/engine/test/api/oneTaskProcess.bpmn20.xml"}) public void testQueryStringVariable(){
assertNotNull(processInstances);
assertEquals(2,processInstances.size());
assertNotNull(resultInstance);
assertEquals(processInstance2.getId(),resultInstance.getId());
assertNotNull(resultInstance);
assertEquals(processInstance3.getId(),resultInstance.getId());
assertNotNull(resultInstance);
assertEquals(processInstance3.getId(),resultInstance.getId());
assertNull(resultInstance);
assertEquals(3,historyService.createHistoricProcessInstanceQuery().variableValueGreaterThanOrEqual("stringVar","abcdef").count());
assertEquals(0,historyService.createHistoricProcessInstanceQuery().variableValueGreaterThanOrEqual("stringVar","z").count());
assertEquals(2,processInstances.size());
assertTrue(ids.isEmpty());
assertEquals(0,historyService.createHistoricProcessInstanceQuery().variableValueLessThan("stringVar","abcdef").count());
assertEquals(3,historyService.createHistoricProcessInstanceQuery().variableValueLessThanOrEqual("stringVar","z").count());
assertEquals(2,processInstances.size());
assertTrue(ids.isEmpty());
assertEquals(3,historyService.createHistoricProcessInstanceQuery().variableValueLessThanOrEqual("stringVar","z").count());
assertEquals(0,historyService.createHistoricProcessInstanceQuery().variableValueLessThanOrEqual("stringVar","aa").count());
assertNotNull(resultInstance);
assertEquals(processInstance3.getId(),resultInstance.getId());
assertNotNull(resultInstance);
assertEquals(processInstance3.getId(),resultInstance.getId());
assertNotNull(resultInstance);
assertEquals(processInstance3.getId(),resultInstance.getId());
assertEquals(3,historyService.createHistoricProcessInstanceQuery().variableValueLike("stringVar","a%").count());
assertEquals(0,historyService.createHistoricProcessInstanceQuery().variableValueLike("stringVar","%x%").count());
assertNotNull(resultInstance);
assertEquals(processInstance3.getId(),resultInstance.getId());
assertEquals(2,processInstances.size());
assertTrue(ids.isEmpty());
assertNull(resultInstance);
}